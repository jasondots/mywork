<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>
<style>
*{margin:0;padding:0}
#calendar{width:210px;margin:100px auto; overflow:hidden;border:1px solid #000; padding:20px; position:relative}
#calendar h4{ text-align:center; margin-bottom:10px}
#calendar .a1{ position:absolute;top:20px;left:20px;}
#calendar .a2{ position:absolute;top:20px;right:20px;}
#calendar .week{height:30px; line-height:20px;border-bottom:1px solid #000; margin-bottom:10px}
#calendar .week li{ float:left;width:30px;height:30px; text-align:center; list-style:none;}
#calendar .dateList{ overflow:hidden; clear:both}
#calendar .dateList li{float:left;width:30px;height:30px; text-align:center; line-height:30px;list-style:none;}
#calendar .dateList .red{ background:#F90; color:#fff;}
#calendar .dateList .sun{ color:#f00;}
#calendar .dateList .ccc{ color:#ccc;}

</style>
<script src="jquery-1.11.3.min.js"></script>
<script>
$(function(){
	var iNow=0;
	
	
	function run(n){
		//年 月 日  本月一共多少天？？   本月第一天是星期几？？
		var oDate=new Date;
		var year=oDate.getFullYear();
		oDate.setMonth(oDate.getMonth()+n);
		var month=oDate.getMonth();
		var today=oDate.getDate();
		
		
		var month_arr= [31,28,31,30,31,30,31,31,30,31,30,31];
		
		var allDays=month_arr[month];
		var prvAllDays=month_arr[month-1<0? 11:month-1];
		var nextAllDays=month_arr[month+1];
		
		/*if(  (year%4==0 && year%100!=0 || year%400==0)  &&  month==1 ){//闰年判断： 4年一润  百年不润 400年再润
			allDays=29;
		};*/
		
		if(year%4==0 && year%100!=0 || year%400==0){//闰年判断： 4年一润  百年不润 400年再润
			if(month==1){
				allDays=29;
			};
		};
		
		oDate.setDate(1);
		var firstWeek=oDate.getDay();//本月第一天星期
		
		oDate.setDate(allDays);
		var lastWeek=oDate.getDay();//本月最后一天星期
		
		//判断本月剩余几天空白
		if(lastWeek==6){
			lastWeek=0;
		}else if(lastWeek==0){
			lastWeek=6;		
		}else if(lastWeek!=6){
			console.log(lastWeek)
			lastWeek=6-lastWeek;
		};
		
		var prDay=prvAllDays-firstWeek;
		
		$('.dateList').empty();
		
		//插入前月日期
		for(var i=0;i<firstWeek;i++){
			prDay++;
			$('.dateList').append('<li class="ccc">'+prDay+'</li>');
		}
		
		//插入本月日期
		for(var i=0;i<allDays;i++){
			$('.dateList').append('<li>'+(i+1)+'</li>');
		};
		
		//插入后月日期
		for(var i=0;i<lastWeek;i++){
			$('.dateList').append('<li class="ccc">'+(i+1)+'</li>');
		};
		
		
		$('.dateList li').each(function(index, element) { //index 索引  element原生对象
			var inner=$(this).text();
			if(inner==today){
				$(this).addClass('red')
			}else if(index%7==0 || index%7==6){
				$(this).addClass('sun')	
			}
		});
		
		$('#calendar h4').text(year+"年"+(month+1)+"月")
	};
	
	run(iNow);
	
	
	
	$('.a1').click(function(){
		iNow--;
		run(iNow);	
	});
	
	$('.a2').click(function(){
		iNow++;
		run(iNow);	
	});
	
	
	
	
});

</script>
</head>

<body>
<div id="calendar">
       <h4>2013年10月</h4>
       <a href="##" class="a1">上月</a>
       <a href="##" class="a2">下月</a>
    <ul class="week">
    	<li>日</li>
    	<li>一</li>
    	<li>二</li>
    	<li>三</li>
    	<li>四</li>
    	<li>五</li>
    	<li>六</li>
    	
    </ul>
    <ul class="dateList">
    
    
    </ul>
</div>
</body>
</html>
