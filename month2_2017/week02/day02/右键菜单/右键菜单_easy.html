<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>
<style>
*{ margin:0; padding:0}
.r_menu{ width:100px; border:1px solid #ccc; padding:5px; position:absolute; list-style:none; background:#fff;}
.r_menu li{ height:30px; line-height:30px; border-bottom:1px solid #ccc;}
</style>
<script src="jquery-1.11.3.min.js"></script>
<script>
$(function(){
	var rM=$('<ul class="r_menu"><li>删除</li><li>复制</li><li>粘贴</li></ul>');
	
	$('#box').contextmenu(function(ev){
		var l=ev.pageX;
		var t=ev.pageY;
		
		$(document.body).append(rM);
		
		rM.css({"left":l,"top":t});
		
		rM.children("li").eq(0).click(function(){
			$('#box,.r_menu').remove();
		});
		return false;//阻止默认事件
	});
	
	$(document).add('#box').click(function(){
		$(rM).remove();
	});
	
	$(document).contextmenu(function(ev){
		$(rM).remove();
		//ev.preventDefault();//阻止默认事件
		//return false;
	});




});





/*
window.onload=function(){
	
	//阻止右键菜单
	//document.body.oncontextmenu=function(){
	//	return false;
	//};
	
	var oDiv=document.getElementById('box');
	
	var right_menu=document.createElement('ul');
	right_menu.className='r_menu';
	
	right_menu.id='right_menu_id';//为删除用，否则会报错
	right_menu.innerHTML='<li>删除</li><li>复制</li><li>粘贴</li>';
	
	oDiv.oncontextmenu=function(ev){
		document.body.appendChild(right_menu);
		ev=ev || window.event;
		var l=ev.clientX;//得到鼠标坐标
		var t=ev.clientY;
		ev.cancelBubble=true;//如果不阻止冒泡，会传播到body上，删除right_menu
		
		//创建右键的菜单
		
		right_menu.style.top=t+'px';
		right_menu.style.left=l+'px';
		
		//删除div
		right_menu.children[0].onclick=function(){
			document.body.removeChild(oDiv);
		};
		
		return false;
	};
	
	//--------------------------------------------------------------
	
	oDiv.onclick=document.onclick=document.oncontextmenu=function(){
		if(document.getElementById('right_menu_id'))document.body.removeChild(document.getElementById('right_menu_id'));
	
	};
}
*/



</script>


</head>

<body>
<div id="box" style="width:200px; height:200px; background:red">
</div>

<!--<ul class="r_menu">
	<li>删除</li>
    <li>复制</li>
    <li>粘贴</li>
</ul>-->



</body>
</html>
