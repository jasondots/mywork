<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>
<script>
window.onload=function(){
	var oBtn=document.getElementById('btn');
	var showTime=document.getElementById('showTime');
	var sel=document.getElementsByTagName('select');
	
	
	function run(){
		var year=sel[0].value;
		var month=sel[1].value-1;
		var day=sel[2].value;
		
		//取此时此刻的时间
		var oDate=new Date();//实例化 时间对象
		var now_time=oDate.getTime();//当前毫秒
		
		//先拨表
		oDate.setFullYear(year,month,day);
		oDate.setHours(0,0,0,0)//定义时分秒
		
		var future_time=oDate.getTime();//未来毫秒
		
		//计算时间差
		
		var dif_time=future_time-now_time;//时间差（毫秒）
		//alert(dif_time)
		
		dif_time=parseInt(dif_time/1000);
		//计算天
		var dif_day=parseInt(dif_time/86400);
		//var dif_day=Math.floor(dif_time/86400);//不能用Math.floor
		//alert(Math.floor(-0.15)); -1
		//alert(parseInt(-0.15)) 0
		
		console.log(dif_day);
		
		//计算小时
		dif_time=dif_time%86400;//过滤掉 天
		var dif_hour=parseInt(dif_time/3600);
		console.log(dif_hour);
		
		dif_time=dif_time%3600;//过滤掉 小时
		var dif_m=parseInt(dif_time/60);
		console.log(dif_m);
		
		var dif_s=dif_time%60;//过滤掉分 剩下的就是秒
		
		showTime.innerHTML='距离'+year+'年'+(month+1)+'月'+day+'日还有：'+dif_day+'天'+dif_hour+'小时'+dif_m+'分'+dif_s+'秒';
	};
	
	
	oBtn.onclick=function(){
		run();
		setInterval(run,1000);
	};



}



</script>


</head>

<body>
<div class="box" style=" width:800px; margin:100px auto; border:1px solid #ccc; padding:20px; text-align:center">
	<select>
	<option value="2016">2016</option>
    <option value="2017">2017</option>
</select>年
<select>
	<option value="1">01</option>
    <option value="2">02</option>
    <option value="3">03</option>
    <option value="4">04</option>
    <option value="5">05</option>
    <option value="6">06</option>
    <option value="7">07</option>
    <option value="8" selected>08</option>
    <option value="9">09</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
</select>月
<select>
	<option value="1">01</option>
    <option value="2">02</option>
    <option value="3">03</option>
    <option value="4">04</option>
    <option value="5">05</option>
    <option value="6">06</option>
    <option value="7">07</option>
    <option value="8">08</option>
    <option value="9">09</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
    <option value="13">13</option>
    <option value="14">14</option>
    <option value="15">15</option>
    <option value="16">16</option>
    <option value="17">17</option>
    <option value="18">18</option>
    <option value="19">19</option>
    <option value="20">20</option>
    <option value="21">21</option>
    <option value="22">22</option>
    <option value="23">23</option>
    <option value="24">24</option>
    <option value="25">25</option>
    <option value="26">26</option>
    <option value="27">27</option>
    <option value="28">28</option>
    <option value="29">29</option>
    <option value="30" selected>30</option>
    <option value="31">31</option>
</select>日
<button id="btn" type="button">开始倒计时</button>
<p id="showTime" style="font-size:30px"></p>
</div>


</body>
</html>
